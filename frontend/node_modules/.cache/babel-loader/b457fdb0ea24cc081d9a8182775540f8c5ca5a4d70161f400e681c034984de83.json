{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import\"./Admin.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Admin(){const[feedbacks,setFeedbacks]=useState([]);const navigate=useNavigate();// Fetch feedback list\nuseEffect(()=>{fetch(\"http://localhost:5000/feedback\").then(res=>res.json()).then(data=>setFeedbacks(data)).catch(err=>console.error(\"Error fetching feedbacks:\",err));},[]);// Delete feedback\nconst handleDelete=id=>{fetch(\"http://localhost:5000/feedback/\".concat(id),{method:\"DELETE\"}).then(()=>setFeedbacks(feedbacks.filter(f=>f._id!==id))).catch(err=>console.error(\"Error deleting feedback:\",err));};// Edit feedback\nconst handleEdit=id=>{const newText=prompt(\"Enter new feedback:\");if(!newText)return;fetch(\"http://localhost:5000/feedback/\".concat(id),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({content:newText})}).then(res=>res.json()).then(updated=>{setFeedbacks(feedbacks.map(f=>f._id===id?updated:f));}).catch(err=>console.error(\"Error editing feedback:\",err));};// View feedback\nconst handleView=content=>{alert(\"Feedback: \".concat(content));};// Logout\nconst handleLogout=()=>{localStorage.removeItem(\"token\");// remove JWT\nnavigate(\"/login\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"admin-title\",children:\"Admin Feedback Dashboard\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Feedback\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:feedbacks.length>0?feedbacks.map((f,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:f.content}),/*#__PURE__*/_jsx(\"td\",{children:new Date(f.createdAt).toISOString().split(\"T\")[0]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleView(f.content),children:\"View\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(f._id),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(f._id),children:\"Delete\"})]})]},f._id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",children:\"No feedback available\"})})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:handleLogout,children:\"Log Out\"})]});}export default Admin;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Admin","feedbacks","setFeedbacks","navigate","fetch","then","res","json","data","catch","err","console","error","handleDelete","id","concat","method","filter","f","_id","handleEdit","newText","prompt","headers","body","JSON","stringify","content","updated","map","handleView","alert","handleLogout","localStorage","removeItem","className","children","length","index","Date","createdAt","toISOString","split","onClick","colSpan"],"sources":["C:/Users/Alauddin Ali/customer-feedback/frontend/src/pages/Admin.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./Admin.css\";\r\n\r\nfunction Admin() {\r\n  const [feedbacks, setFeedbacks] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  // Fetch feedback list\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/feedback\")\r\n      .then((res) => res.json())\r\n      .then((data) => setFeedbacks(data))\r\n      .catch((err) => console.error(\"Error fetching feedbacks:\", err));\r\n  }, []);\r\n\r\n  // Delete feedback\r\n  const handleDelete = (id) => {\r\n    fetch(`http://localhost:5000/feedback/${id}`, { method: \"DELETE\" })\r\n      .then(() => setFeedbacks(feedbacks.filter((f) => f._id !== id)))\r\n      .catch((err) => console.error(\"Error deleting feedback:\", err));\r\n  };\r\n\r\n  // Edit feedback\r\n  const handleEdit = (id) => {\r\n    const newText = prompt(\"Enter new feedback:\");\r\n    if (!newText) return;\r\n    fetch(`http://localhost:5000/feedback/${id}`, {\r\n      method: \"PUT\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ content: newText }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((updated) => {\r\n        setFeedbacks(feedbacks.map((f) => (f._id === id ? updated : f)));\r\n      })\r\n      .catch((err) => console.error(\"Error editing feedback:\", err));\r\n  };\r\n\r\n  // View feedback\r\n  const handleView = (content) => {\r\n    alert(`Feedback: ${content}`);\r\n  };\r\n\r\n  // Logout\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"token\"); // remove JWT\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-container\">\r\n      <h2 className=\"admin-title\">Admin Feedback Dashboard</h2>\r\n      <table className=\"admin-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>Feedback</th>\r\n            <th>Date</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {feedbacks.length > 0 ? (\r\n            feedbacks.map((f, index) => (\r\n              <tr key={f._id}>\r\n                <td>{index + 1}</td>\r\n                <td>{f.content}</td>\r\n                <td>{new Date(f.createdAt).toISOString().split(\"T\")[0]}</td>\r\n                <td>\r\n                  <button onClick={() => handleView(f.content)}>View</button>\r\n                  <button onClick={() => handleEdit(f._id)}>Edit</button>\r\n                  <button onClick={() => handleDelete(f._id)}>Delete</button>\r\n                </td>\r\n              </tr>\r\n            ))\r\n          ) : (\r\n            <tr>\r\n              <td colSpan=\"4\">No feedback available</td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n      </table>\r\n      <button className=\"logout-btn\" onClick={handleLogout}>\r\n        Log Out\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Admin;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}